# MTS-SRE-courses

1. Разработать профиль нагрузки для системы
	Проводём нагрузочное тестирование с целью выявить узкие места, ошибки и проблемы производительности системы. Будем имитировать деятельность пользователей, которые обращаются к БД с целью получить данные, одновременно используя и post методы иммитируя заполнение БД


2. Реализовать профиль на любом инструменте НТ (разработать скрипт)
	Скрипт представлен в файл scripy.json. Этот скрипт предназначен для нагрузочного тестирования API, который предоставляет информацию о погоде и городах. Скрипт написан на языке JavaScript с использованием библиотеки k6. Скрипт выполняет следующие действия:
	•  Импортирует модули http, group, check и sleep из k6.
	•  Определяет базовый URL API и переменную SLEEP_DURATION, которая задает время ожидания между запросами.
	•  Определяет опции теста, такие как максимальное и начальное количество виртуальных пользователей (VUs), а также стадии, в которых количество VUs изменяется по времени.
	•  Экспортирует функцию по умолчанию, которая выполняется каждым VU в цикле. Функция состоит из нескольких групп, каждая из которых имитирует определенный сценарий использования API.
	•  В каждой группе выполняются один или несколько HTTP-запросов к разным эндпоинтам API, используя методы get, post или put. Некоторые запросы содержат параметры в URL или тело запроса, которые генерируются случайным образом или задаются вручную.
	•  После каждого запроса проверяется, что статус ответа равен 200, что означает успешное выполнение. Если проверка не проходит, то это отображается в отчете теста.
	•  После некоторых запросов вызывается функция sleep, чтобы имитировать задержку между действиями пользователя.
3. Задать нефункциональные требования по производительности к системе (SLO/SLA)
	SLO: система должна иметь следующие цели по производительности:
		•  Время отклика: система должна отвечать на 95% запросов пользователей менее чем за 1 секунду, и на 99% запросов менее чем за 3 секунды.
		•  Доступность: система должна быть доступна для пользователей 99,9% времени в течение месяца, то есть иметь не более 43 минут простоя в месяц.
		•  Надежность: система должна обеспечивать точность и свежесть данных о погоде и городах, то есть не допускать ошибок или устаревания данных более чем на 10%.
	•  SLA: система должна иметь следующие соглашения по производительности с потребителями:
		•  Если система не выполняет SLO по времени отклика, то поставщик системы должен уведомить потребителей об этом в течение 15 минут и предоставить план устранения проблемы в течение 1 часа.
		•  Если система не выполняет SLO по доступности, то поставщик системы должен компенсировать потребителям 10% от стоимости подписки за каждый час простоя сверх 43 минут в месяц.
		•  Если система не выполняет SLO по надежности, то поставщик системы должен исправить ошибки или обновить данные в течение 24 часов и извиниться перед потребителями за неудобства.
4. Найти максимальную производительность системы
	Исходя из результатов нагрузочного тестирования, можно сделать следующие выводы:
		•  Система не может достичь максимальной производительности, которая была запланирована в параметрах теста. Система демонстрирует высокий уровень неудачных запросов (55.55%), долгое время отклика (в среднем 227.42 мс, в максимуме 31.36 с) и большое потребление ресурсов (в среднем 2.38 с на итерацию, в максимуме 32.94 с).
		•  Система показывает разную производительность в зависимости от типа запроса. Например, запросы /WeatherForecast и /Forecast имеют 100% успеха, а запросы /Forecast/{cityId} и /Cities/{id} имеют 0% успеха. Также, запросы /Forecast/{id} и /Cities имеют 50% успеха, но разное время отклика (в среднем 290.68 мс и 164.16 мс соответственно).
		•  Система имеет проблемы с масштабируемостью и стабильностью. Система не может обслуживать 100 виртуальных пользователей (VUs) одновременно, как было задано в параметрах теста. Система также имеет большие колебания во времени отклика и потреблении ресурсов, что указывает на нестабильность работы системы.
   
6. Написать краткий вывод: где достигнута максимальная производительность, где узкое место в системе, для подтверждения привести графики.
Судя по результатам нагрузочного тестирования, система не может достичь максимальной производительности, которая была запланирована. Система демонстрирует высокий уровень неудачных запросов, долгое время отклика и большое потребление ресурсов. Возможные причины такого поведения могут быть следующими:
•  Недостаточная оптимизация кода скрипта или API, которые могут содержать излишние или некорректные операции, вызывающие задержки или ошибки.
•  Неправильная настройка параметров теста, таких как количество виртуальных пользователей, длительность нагрузки, распределение нагрузки по сценариям и т.д., которые могут превышать возможности системы или не соответствовать реальной нагрузке.
•  Низкая пропускная способность или нестабильность сети, которые могут влиять на скорость передачи данных между клиентом и сервером и вызывать потерю пакетов или перегрузку канала.
•  Недостаточная мощность или конфигурация оборудования, на котором запускается система или тест, которые могут не справляться с высокой нагрузкой и потреблять слишком много ресурсов, таких как ЦП, память, диск и т.д.

Исходя из графиков, особых скачков напряжения на систему не было, хочется грешить только на плохо написанный код ;(
Для улучшения производительности системы необходимо проанализировать результаты тестирования и выявить узкие места и проблемные зоны. Затем необходимо оптимизировать код скрипта или API Также можно использовать другие инструменты или методы для нагрузочного тестирования, которые могут быть более подходящими для данной системы или цели тестирования.
![image](https://github.com/sn1za/MTS-SRE-courses/assets/50699608/06057076-c116-4c1c-ac00-4741d22aec0d)
